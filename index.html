<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Apoyo a la Salud Mental</title>
<style>
  body {
    margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #ffe4ec;
    color: #5a2a3a;
    transition: background 0.3s, color 0.3s;
  }
  .dark {
    background: #d99bbf; /* rosado oscuro pastel */
    color: #3a1d33;
  }
  header {
    padding: 1em; text-align: center; background: #f8c7d0; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }
  header.dark {
    background: #c380a5;
  }
  h1 {
    margin: 0; font-weight: 700;
  }
  .container {
    max-width: 900px; margin: 1em auto; padding: 1em;
    background: #fff0f6; border-radius: 10px;
    box-shadow: 0 0 15px rgba(255,192,203,0.3);
  }
  .dark .container {
    background: #e0a6c2;
    box-shadow: 0 0 15px rgba(255,182,193,0.6);
  }

  /* Corazón respiración */
  #heart-container {
    width: 120px; height: 110px; margin: 1em auto;
  }
  svg {
    display: block; margin: auto;
    filter: drop-shadow(0 0 4px #f497b2);
  }
  .beat {
    animation: beat 4s ease-in-out infinite;
    transform-origin: center;
  }
  @keyframes beat {
    0%, 100% { transform: scale(1); }
    25% { transform: scale(1.2); }
    50% { transform: scale(1); }
    75% { transform: scale(1.2); }
  }

  /* Botón y temporizador */
  #breath-btn {
    display: block; margin: 1em auto; padding: 0.6em 1.4em;
    background: #f497b2; border: none; border-radius: 25px;
    color: white; font-weight: 600; cursor: pointer;
    box-shadow: 0 4px 10px rgba(244, 151, 178, 0.5);
    transition: background 0.3s;
  }
  #breath-btn:hover {
    background: #e86e8e;
  }
  #timer {
    text-align: center; font-size: 1.3em; margin-top: 0.5em; font-weight: 700;
  }

  /* Registro emociones */
  #emotion-section {
    margin-top: 2em;
  }
  #emotion-section h2 {
    margin-bottom: 0.5em;
  }
  #emotion-form {
    display: flex; flex-direction: column; gap: 0.6em; margin-bottom: 1em;
  }
  #emotion-form > * {
    font-size: 1em;
    padding: 0.5em;
    border: 2px solid #f497b2;
    border-radius: 8px;
    outline: none;
    transition: border-color 0.3s;
  }
  #emotion-form > *:focus {
    border-color: #e86e8e;
  }
  #emotion-form select {
    max-width: 250px;
  }
  #add-emotion-btn {
    align-self: flex-start;
    background: #f497b2; border: none; color: white; font-weight: 700;
    padding: 0.5em 1em; border-radius: 8px;
    cursor: pointer;
    transition: background 0.3s;
  }
  #add-emotion-btn:hover {
    background: #e86e8e;
  }
  #emotion-list {
    list-style: none; padding-left: 0;
    max-height: 150px; overflow-y: auto;
    border: 1px solid #f497b2; border-radius: 8px;
    background: #ffe4ec;
  }
  #emotion-list li {
    padding: 0.4em 0.8em;
    border-bottom: 1px solid #f497b2;
    display: flex; justify-content: space-between; align-items: center;
    white-space: pre-wrap;
  }
  #emotion-list li:last-child {
    border-bottom: none;
  }
  .delete-btn {
    background: transparent;
    border: none;
    color: #b02a3a;
    font-weight: 700;
    cursor: pointer;
    font-size: 1.1em;
  }

  /* Sección dibujo */
  #drawing-section {
    margin-top: 2em;
  }
  #drawing-section h2 {
    margin-bottom: 0.5em;
  }
  #drawing-canvas {
    border: 2px solid #f497b2;
    border-radius: 10px;
    width: 100%;
    max-width: 600px;
    height: 300px;
    display: block;
    margin: auto;
    background: #fff0f6;
    cursor: crosshair;
  }
  #clear-btn {
    display: block; margin: 0.5em auto 1em auto;
    background: #f497b2; border: none; color: white;
    font-weight: 700; padding: 0.5em 1em;
    border-radius: 8px; cursor: pointer;
    transition: background 0.3s;
  }
  #clear-btn:hover {
    background: #e86e8e;
  }

  /* Consejos diarios */
  #advice-section {
    margin-top: 2em;
    text-align: center;
  }
  #advice-section h2 {
    margin-bottom: 0.5em;
  }
  #advice-text {
    font-style: italic;
    font-size: 1.1em;
    max-width: 600px;
    margin: auto;
    background: #fcd3db;
    padding: 1em 1.5em;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(244, 151, 178, 0.4);
  }

  /* Asistente conejo */
  #assistant-section {
    margin-top: 2em;
    text-align: center;
  }
  #assistant-bunny {
    width: 120px;
    margin: auto;
  }
  #assistant-message {
    margin-top: 0.5em;
    font-weight: 600;
  }

  /* Modo oscuro toggle */
  #dark-mode-toggle {
    position: fixed;
    top: 1em;
    right: 1em;
    background: #f497b2;
    border: none;
    padding: 0.5em 1em;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 700;
    color: white;
    box-shadow: 0 0 10px rgba(244, 151, 178, 0.6);
    transition: background 0.3s;
    z-index: 1000;
  }
  #dark-mode-toggle:hover {
    background: #e86e8e;
  }
</style>
</head>
<body>
<button id="dark-mode-toggle">Modo Oscuro</button>
<header id="header">
  <h1>Apoyo a la Salud Mental</h1>
</header>

<div class="container">
  <!-- Ejercicio de respiración -->
  <section id="breathing-section">
    <div id="heart-container">
      <svg viewBox="0 0 32 29.6" width="120" height="110" xmlns="http://www.w3.org/2000/svg" fill="url(#grad1)">
        <defs>
          <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#ffbfd2;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#f497b2;stop-opacity:1" />
          </linearGradient>
        </defs>
        <path id="heart" class="beat" d="M23.6,0c-2.5,0-4.8,1.4-6,3.5C15.2,1.4,13,0,10.4,0C4.7,0,0,4.7,0,10.4c0,5.5,4.5,10,11.3,15.3 c3.7,2.8,5.4,3.6,6.3,4.1c0.9-0.5,2.6-1.3,6.3-4.1C27.5,20.4,32,15.9,32,10.4C32,4.7,27.3,0,23.6,0z"/>
      </svg>
    </div>
    <button id="breath-btn">Iniciar Respiración</button>
    <div id="timer">00:00</div>
  </section>

  <!-- Registro de emociones -->
  <section id="emotion-section">
    <h2>Registro de Emociones</h2>
    <form id="emotion-form">
      <input type="date" id="emotion-date" required />
      <select id="emotion-select" required>
        <option value="" disabled selected>Selecciona emoción</option>
        <option value="Feliz">Feliz</option>
        <option value="Triste">Triste</option>
        <option value="Ansioso">Ansioso</option>
        <option value="Calmado">Calmado</option>
        <option value="Enojado">Enojado</option>
        <option value="Esperanzado">Esperanzado</option>
        <option value="Frustrado">Frustrado</option>
        <option value="Agradecido">Agradecido</option>
        <option value="Confundido">Confundido</option>
        <option value="Nervioso">Nervioso</option>
        <option value="Relajado">Relajado</option>
        <option value="Motivado">Motivado</option>
      </select>
      <textarea id="emotion-description" rows="3" placeholder="Describe tu problema o cómo te sientes..." required></textarea>
      <button type="submit" id="add-emotion-btn">Agregar</button>
    </form>
    <ul id="emotion-list"></ul>
  </section>

  <!-- Dibujo libre -->
  <section id="drawing-section">
    <h2>Dibujo Libre</h2>
    <canvas id="drawing-canvas"></canvas>
    <button id="clear-btn">Borrar Dibujo</button>
  </section>

  <!-- Consejos diarios -->
  <section id="advice-section">
    <h2>Consejo del Día</h2>
    <div id="advice-text">Respira profundo y recuerda que está bien pedir ayuda cuando la necesites.</div>
  </section>

  <!-- Asistente conejo -->
  <section id="assistant-section">
    <img id="assistant-bunny" src="https://i.imgur.com/tVhUJrY.png" alt="Conejo asistente" />
    <div id="assistant-message">¡Hola! Estoy aquí para ayudarte. ¿Quieres probar una respiración guiada?</div>
  </section>
</div>

<script>
  // Modo oscuro toggle
  const darkModeToggle = document.getElementById('dark-mode-toggle');
  darkModeToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    document.getElementById('header').classList.toggle('dark');
    if(document.body.classList.contains('dark')){
      darkModeToggle.textContent = 'Modo Claro';
    } else {
      darkModeToggle.textContent = 'Modo Oscuro';
    }
  });

  // Respiración guiada
  const breathBtn = document.getElementById('breath-btn');
  const timerDisplay = document.getElementById('timer');
  let breathInterval;
  let seconds = 0;
  let running = false;

  breathBtn.addEventListener('click', () => {
    if(running) {
      clearInterval(breathInterval);
      breathBtn.textContent = 'Iniciar Respiración';
      timerDisplay.textContent = "00:00";
      running = false;
      seconds = 0;
    } else {
      running = true;
      breathBtn.textContent = 'Detener Respiración';
      seconds = 0;
      timerDisplay.textContent = "00:00";
      breathInterval = setInterval(() => {
        seconds++;
        let min = String(Math.floor(seconds / 60)).padStart(2, '0');
        let sec = String(seconds % 60).padStart(2, '0');
        timerDisplay.textContent = `${min}:${sec}`;
      }, 1000);
    }
  });

  // Registro de emociones
  const emotionForm = document.getElementById('emotion-form');
  const emotionList = document.getElementById('emotion-list');

  emotionForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const date = document.getElementById('emotion-date').value;
    const emotion = document.getElementById('emotion-select').value;
    const description = document.getElementById('emotion-description').value.trim();

    if (!date || !emotion || !description) return;

    const li = document.createElement('li');
    li.textContent = `${date} — ${emotion}: ${description}`;

    // Botón eliminar
    const delBtn = document.createElement('button');
    delBtn.textContent = '×';
    delBtn.classList.add('delete-btn');
    delBtn.title = "Eliminar registro";
    delBtn.onclick = () => li.remove();

    li.appendChild(delBtn);
    emotionList.appendChild(li);

    // Reset form
    emotionForm.reset();
  });

  // Dibujo libre
  const canvas = document.getElementById('drawing-canvas');
  const ctx = canvas.getContext('2d');
  let drawing = false;
  let lastX = 0, lastY = 0;

  function resizeCanvas() {
    const ratio = window.devicePixelRatio || 1;
    canvas.width = canvas.clientWidth * ratio;
    canvas.height = canvas.clientHeight * ratio;
    ctx.scale(ratio, ratio);
    ctx.lineCap = 'round';
    ctx.lineJoin = 'round';
    ctx.strokeStyle = '#f497b2';
    ctx.lineWidth = 4;
  }
  window.addEventListener('resize', resizeCanvas);
  resizeCanvas();

  canvas.addEventListener('mousedown', (e) => {
    drawing = true;
    const rect = canvas.getBoundingClientRect();
    lastX = e.clientX - rect.left;
    lastY = e.clientY - rect.top;
  });
  canvas.addEventListener('mousemove', (e) => {
    if (!drawing) return;
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    ctx.beginPath();
    ctx.moveTo(lastX, lastY);
    ctx.lineTo(x, y);
    ctx.stroke();
    lastX = x;
    lastY = y;
  });
  canvas.addEventListener('mouseup', () => drawing = false);
  canvas.addEventListener('mouseout', () => drawing = false);

  document.getElementById('clear-btn').addEventListener('click', () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  });

  // Consejos diarios
  const adviceText = document.getElementById('advice-text');
  const advices = [
    "Respira profundo y recuerda que está bien pedir ayuda cuando la necesites.",
    "Tómate un momento para agradecer tres cosas buenas de hoy.",
    "El autocuidado no es egoísmo, es una necesidad.",
    "Hablar de tus emociones te hace más fuerte, no más débil.",
    "Cada pequeño paso hacia el bienestar cuenta.",
    "Practica la paciencia contigo mismo.",
    "El descanso también es parte del progreso.",
    "Recuerda que no estás solo, siempre hay apoyo disponible."
  ];

  function changeAdvice() {
    const index = Math.floor(Math.random() * advices.length);
    adviceText.textContent = advices[index];
  }
  setInterval(changeAdvice, 12000); // cambia cada 12 segundos
  changeAdvice();

  // Asistente conejo interactivo
  const assistantMessage = document.getElementById('assistant-message');
  const bunnyImg = document.getElementById('assistant-bunny');

  // Mensajes predefinidos
  const bunnyReplies = [
    "¡Hola! ¿Quieres intentar una respiración guiada?",
    "Recuerda que está bien tomarte un descanso cuando lo necesites.",
    "Si te sientes abrumado, intenta escribir o dibujar tus sentimientos.",
    "Estoy aquí para escucharte, aunque sea de manera virtual.",
    "Cada día es una nueva oportunidad para cuidarte.",
    "¿Quieres registrar cómo te sientes ahora?"
  ];

  bunnyImg.addEventListener('click', () => {
    const msg = bunnyReplies[Math.floor(Math.random() * bunnyReplies.length)];
    assistantMessage.textContent = msg;
  });
</script>

</body>
</html>
