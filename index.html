<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Apoyo Salud Mental</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #ffe6f0; /* rosa pastel claro */
      color: #333;
      margin: 0;
      padding: 20px;
    }
    .dark {
      background: #2c2c2c;
      color: #eee;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    button {
      background: #d87a8a;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
    }
    button:disabled {
      background: #aaa;
      cursor: not-allowed;
    }
    select {
      padding: 7px;
      border-radius: 5px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
      width: 100%;
      max-width: 300px;
    }
    .section-container {
      background: white;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 25px;
      box-shadow: 0 0 8px rgba(216, 122, 138, 0.3);
    }
    #breath-heart {
      width: 100px;
      height: 100px;
      margin: 0 auto 15px auto;
      display: block;
      animation: pulse 4s infinite;
      filter: drop-shadow(0 0 2px #d87a8a);
    }
    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
        fill: url(#grad1);
      }
      50% {
        transform: scale(1.1);
        fill: url(#grad2);
      }
    }
    canvas {
      border: 2px solid #d87a8a;
      border-radius: 10px;
      touch-action: none;
    }
    #assistant {
      text-align: center;
      margin-bottom: 20px;
      font-size: 1.2em;
      background: #ffd9e6;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 0 6px #d87a8a;
    }
  </style>
</head>
<body>

  <header>
    <h1>Apoyo Salud Mental</h1>
    <button id="dark-toggle">Modo Oscuro</button>
  </header>

  <div id="assistant" aria-live="polite" aria-atomic="true" role="alert">
    üê∞ <span id="assistant-message">Hola, soy tu asistente conejo. ¬°Estoy aqu√≠ para apoyarte!</span>
  </div>

  <!-- Respiraci√≥n con coraz√≥n animado -->
  <div class="section-container" aria-label="Ejercicio de respiraci√≥n">
    <svg id="breath-heart" viewBox="0 0 32 29.6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" style="stop-color:#f8b9c8;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#d87a8a;stop-opacity:1" />
        </linearGradient>
        <linearGradient id="grad2" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#fbcbd1;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#d15d7a;stop-opacity:1" />
        </linearGradient>
      </defs>
      <path
        fill="url(#grad1)"
        d="M23.6,0c-3.4,0-6.4,2.7-7.6,4.8C14.8,2.7,11.8,0,8.4,0
           C3.7,0,0,3.6,0,8.2c0,9.1,16,21.4,16,21.4s16-12.3,16-21.4
           C32,3.6,28.3,0,23.6,0z"
        opacity="0.4"
      />
      <path
        fill="url(#grad2)"
        d="M23.6,0c-3.4,0-6.4,2.7-7.6,4.8C14.8,2.7,11.8,0,8.4,0
           C3.7,0,0,3.6,0,8.2c0,9.1,16,21.4,16,21.4s16-12.3,16-21.4
           C32,3.6,28.3,0,23.6,0z"
        opacity="1"
      />
    </svg>
    <button id="start-breath" aria-label="Iniciar ejercicio de respiraci√≥n">Iniciar Respiraci√≥n (15s)</button>
    <p id="breath-status">Respira tranquilo...</p>
  </div>

  <!-- Registro de emociones -->
  <div class="section-container" aria-label="Registro de emociones">
    <h2>Registro de Emociones</h2>
    <label for="emotion-select">¬øC√≥mo te sientes hoy?</label>
    <select id="emotion-select" aria-label="Seleccionar emoci√≥n">
      <option value="" disabled selected>Selecciona una emoci√≥n</option>
      <option value="üòä">Feliz üòä</option>
      <option value="üò¢">Triste üò¢</option>
      <option value="üò†">Enojado üò†</option>
      <option value="üò∞">Ansioso üò∞</option>
      <option value="üò¥">Cansado üò¥</option>
      <option value="üòç">Enamorado üòç</option>
      <option value="üòå">Relajado üòå</option>
      <option value="ü§î">Pensativo ü§î</option>
      <option value="üòï">Confundido üòï</option>
      <option value="üò≠">Deprimido üò≠</option>
      <option value="üòá">Esperanzado üòá</option>
      <option value="üòé">Seguro üòé</option>
      <option value="üò°">Frustrado üò°</option>
    </select>
    <button id="save-emotion" aria-label="Guardar emoci√≥n seleccionada">Guardar emoci√≥n</button>

    <div id="saved-emotions" aria-live="polite" aria-atomic="true">
      <h3>Emociones guardadas:</h3>
      <ul id="emotion-list"></ul>
    </div>
  </div>

  <!-- Secci√≥n para dibujar -->
  <div class="section-container" aria-label="Secci√≥n para dibujar">
    <h2>Dibuja tus emociones</h2>
    <canvas id="draw-canvas" width="600" height="300" aria-label="Lienzo para dibujar"></canvas><br />
    <button id="clear-canvas" aria-label="Limpiar dibujo">Limpiar dibujo</button>
  </div>

  <!-- Consejos diarios -->
  <div class="section-container" aria-label="Consejos diarios">
    <h2>Consejo del d√≠a</h2>
    <p id="daily-tip" style="font-style: italic; font-weight: bold;"></p>
    <button id="new-tip" aria-label="Mostrar otro consejo">Otro consejo</button>
  </div>

  <!-- Audio relajante -->
  <div class="section-container" aria-label="M√∫sica relajante">
    <h2>M√∫sica relajante</h2>
    <audio id="relax-audio" controls>
      <source src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_b0f089a7fc.mp3?filename=relaxing-music-12420.mp3" type="audio/mpeg" />
      Tu navegador no soporta audio.
    </audio>
  </div>

  <script>
    // Modo oscuro toggle
    const darkToggle = document.getElementById('dark-toggle');
    darkToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      // Guardar preferencia local
      if (document.body.classList.contains('dark')) {
        localStorage.setItem('theme', 'dark');
      } else {
        localStorage.setItem('theme', 'light');
      }
    });
    // Cargar preferencia guardada
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark');
    }

    // Asistente conejo mensajes
    const assistantMsg = document.getElementById('assistant-message');
    const tips = [
      "Recuerda respirar profundo y lento. üê∞",
      "Es normal tener d√≠as dif√≠ciles, ¬°√°nimo! üêá",
      "No olvides que mereces cuidarte. üíñ",
      "¬øQuieres probar un ejercicio de respiraci√≥n? ‚ù§Ô∏è",
      "Escribe o dibuja c√≥mo te sientes, te ayudar√°. ‚úçÔ∏è",
      "El descanso es parte del autocuidado. üò¥",
      "Sonr√≠e, aunque sea peque√±o, hace la diferencia. üòä",
    ];
    let tipIndex = 0;
    setInterval(() => {
      tipIndex = (tipIndex + 1) % tips.length;
      assistantMsg.textContent = tips[tipIndex];
    }, 10000);

    // Respiraci√≥n con coraz√≥n animado y temporizador
    const breathHeart = document.getElementById('breath-heart');
    const breathStatus = document.getElementById('breath-status');
    const startBreathBtn = document.getElementById('start-breath');

    startBreathBtn.addEventListener('click', () => {
      startBreathBtn.disabled = true;
      breathStatus.textContent = 'Inhala...';
      let seconds = 0;
      const interval = setInterval(() => {
        seconds++;
        if (seconds === 5) {
          breathStatus.textContent = 'Sost√©n la respiraci√≥n...';
        } else if (seconds === 10) {
          breathStatus.textContent = 'Exhala...';
        } else if (seconds === 15) {
          breathStatus.textContent = 'Respira tranquilo...';
          startBreathBtn.disabled = false;
          clearInterval(interval);
        }
      }, 1000);
    });

    // Registro de emociones y guardado en localStorage
    const emotionSelect = document.getElementById('emotion-select');
    const saveEmotionBtn = document.getElementById('save-emotion');
    const emotionList = document.getElementById('emotion-list');

    function loadEmotions() {
      const emotions = JSON.parse(localStorage.getItem('emotions') || '[]');
      emotionList.innerHTML = '';
      emotions.forEach(e => {
        const li = document.createElement('li');
        li.textContent = `${e.date} - ${e.emotion}`;
        emotionList.appendChild(li);
      });
    }

    saveEmotionBtn.addEventListener('click', () => {
      const val = emotionSelect.value;
      if (!val) {
        alert('Por favor, selecciona una emoci√≥n');
        return;
      }
      const emotions = JSON.parse(localStorage.getItem('emotions') || '[]');
      const now = new Date();
      emotions.push({ emotion: val, date: now.toLocaleString() });
      localStorage.setItem('emotions', JSON.stringify(emotions));
      loadEmotions();
      emotionSelect.value = '';
    });

    loadEmotions();

    // Canvas para dibujar
    const canvas = document.getElementById('draw-canvas');
    const ctx = canvas.getContext('2d');
    let drawing = false;
    let lastX = 0;
    let lastY = 0;

    function startPosition(e) {
      drawing = true;
      [lastX, lastY] = getXY(e);
    }
    function finishedPosition() {
      drawing = false;
      ctx.beginPath();
    }
    function draw(e) {
      if (!drawing) return;
      const [x, y] = getXY(e);
      ctx.lineWidth = 4;
      ctx.lineCap = 'round';
      ctx.strokeStyle = '#d87a8a';
      ctx.beginPath();
      ctx.moveTo(lastX, lastY);
      ctx.lineTo(x, y);
      ctx.stroke();
      [lastX, lastY] = [x, y];
    }
    function getXY(e) {
      if (e.touches) {
        const rect = canvas.getBoundingClientRect();
        return [
          e.touches[0].clientX - rect.left,
          e.touches[0].clientY - rect.top,
        ];
      } else {
        return [e.offsetX, e.offsetY];
      }
    }

    canvas.addEventListener('mousedown', startPosition);
    canvas.addEventListener('mouseup', finishedPosition);
    canvas.addEventListener('mouseout', finishedPosition);
    canvas.addEventListener('mousemove', draw);

    canvas.addEventListener('touchstart', startPosition);
    canvas.addEventListener('touchend', finishedPosition);
    canvas.addEventListener('touchcancel', finishedPosition);
    canvas.addEventListener('touchmove', draw);

    document.getElementById('clear-canvas').addEventListener('click', () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    });

    // Consejos diarios (aleatorios) - lista ampliada
    const dailyTipEl = document.getElementById('daily-tip');
    const newTipBtn = document.getElementById('new-tip');
    const dailyTips = [
      "T√≥mate un momento para respirar profundo hoy.",
      "Escribe tres cosas por las que est√°s agradecido.",
      "Sal a caminar y observa la naturaleza.",
      "Habla con alguien de confianza sobre c√≥mo te sientes.",
      "Recuerda que est√° bien pedir ayuda cuando la necesites.",
      "Dedica 5 minutos a meditar o estar en silencio.",
      "Date permiso para descansar y recargar energ√≠as.",
      "Escucha tu m√∫sica favorita para animarte.",
      "Practica la gratitud escribiendo un diario.",
      "Estira tu cuerpo lentamente para liberar tensi√≥n.",
      "Haz algo amable por otra persona hoy.",
      "Perm√≠tete sentir tus emociones sin juzgarte.",
      "Evita las redes sociales si te hacen sentir mal.",
      "Bebe agua y mantente hidratado.",
      "Disfruta de un momento de silencio y paz.",
      "Practica un hobby que te guste o empieza uno nuevo.",
      "Haz una pausa para observar tu respiraci√≥n ahora.",
      "Con√©ctate con la naturaleza, aunque sea desde la ventana.",
      "Celebra tus peque√±os logros, son importantes.",
      "Escribe una carta que no env√≠es, solo para expresar tus sentimientos.",
      "Pon m√∫sica suave y mueve tu cuerpo suavemente.",
      "Perm√≠tete decir ‚Äòno‚Äô cuando lo necesites.",
      "Usa afirmaciones positivas para animarte.",
      "Limpia y organiza un espacio peque√±o para sentir control.",
      "Visualiza un lugar seguro y tranquilo en tu mente.",
      "Sonr√≠e aunque no te sientas feliz, el cuerpo responde.",
      "Prueba t√©cnicas de relajaci√≥n muscular progresiva.",
      "Evita el exceso de cafe√≠na o sustancias que alteren tu √°nimo.",
      "Conecta con amigos o familiares que te hagan sentir bien.",
      "Escribe un poema, dibujo o lo que salga para liberar emociones.",
      "Recuerda que cada d√≠a es una nueva oportunidad.",
      "Perm√≠tete descansar sin culpa.",
      "Escucha sonidos de la naturaleza para relajarte.",
      "T√≥mate un ba√±o o ducha relajante.",
      "Practica mindfulness en una actividad diaria sencilla.",
      "Mira fotos o recuerdos que te hagan sonre√≠r.",
      "Haz respiraciones profundas cuando te sientas abrumado.",
      "Date un momento para hacer algo divertido y ligero.",
      "S√© paciente contigo mismo, el cambio lleva tiempo.",
      "Busca ayuda profesional si sientes que la necesitas.",
      "Haz ejercicios suaves como yoga o estiramientos.",
      "Limita el tiempo frente a pantallas si te estresa.",
      "Recuerda que est√° bien pedir un abrazo.",
      "Perm√≠tete expresar tu creatividad sin juzgar.",
      "Agradece a alguien hoy, aunque sea en silencio.",
      "Descon√©ctate un rato del trabajo o estudios.",
      "Haz una lista de cosas que te hacen feliz.",
      "Medita con atenci√≥n plena en los sonidos a tu alrededor.",
      "Recuerda que eres valioso tal como eres.",
      "Celebra tu resiliencia, lo que has superado.",
    ];
    function showRandomTip() {
      const randomIndex = Math.floor(Math.random() * dailyTips.length);
      dailyTipEl.textContent = dailyTips[randomIndex];
    }
    newTipBtn.addEventListener('click', showRandomTip);
    showRandomTip();

  </script>

</body>
</html>
